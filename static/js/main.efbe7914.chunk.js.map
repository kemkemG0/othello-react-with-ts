{"version":3,"sources":["components/OthelloParts.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Cell","props","h","w","color","putCell","cellColor","type","className","style","background","onClick","BoardRow","indexes","Array","keys","rowColor","map","Board","normalRow","dh","dw","useState","boardState","setBoardState","turn","setTurn","reverseCells","prevState","newState","myturn","isReversed","me","enemy","i","j","nh","nw","isReversible","pre","reverseExecution","prevTurn","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.efbe7914.chunk.js","sourcesContent":["/* eslint-disable no-continue */\n/* eslint-disable no-constant-condition */\nimport React, { useState } from \"react\";\n\ntype Color = \"BL\" | \"WH\" | \"N\";\n\ninterface CellProps {\n  h: number;\n  w: number;\n  color: Color;\n  putCell: (h: number, w: number) => void;\n}\n\ninterface BoardRowProps {\n  h: number;\n  rowColor: Color[];\n  putCell: (h: number, w: number) => void;\n}\n\nconst Cell: React.FC<CellProps> = (props) => {\n  const { h, w, color, putCell } = props;\n  let cellColor = \"N\";\n  switch (color) {\n    case \"BL\":\n      cellColor = \"black\";\n      break;\n    case \"WH\":\n      cellColor = \"white\";\n      break;\n    default:\n      cellColor = \"green\";\n  }\n  return (\n    <>\n      <input\n        type=\"button\"\n        className=\"btn\"\n        style={{\n          background: cellColor,\n        }}\n        onClick={() => {\n          putCell(h, w);\n        }}\n      />\n    </>\n  );\n};\n\nconst BoardRow: React.FC<BoardRowProps> = (props) => {\n  const indexes = [...Array(8).keys()];\n  const { h, rowColor, putCell } = props;\n  return (\n    <>\n      {indexes.map((w) => (\n        <td key={w}>\n          <Cell h={h} w={w} color={rowColor[w]} putCell={putCell} />\n        </td>\n      ))}\n    </>\n  );\n};\n\nconst Board: React.FC = () => {\n  const normalRow: Color[] = [\"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\"];\n  const dh = [1, -1, 0];\n  const dw = [1, -1, 0];\n  const indexes = [...Array(8).keys()];\n  const [boardState, setBoardState] = useState<Color[][]>([\n    [...normalRow],\n    [...normalRow],\n    [...normalRow],\n    [\"N\", \"N\", \"N\", \"WH\", \"BL\", \"N\", \"N\", \"N\"],\n    [\"N\", \"N\", \"N\", \"BL\", \"WH\", \"N\", \"N\", \"N\"],\n    [...normalRow],\n    [...normalRow],\n    [...normalRow],\n  ]);\n\n  const [turn, setTurn] = useState<Color>(\"BL\");\n\n  const reverseExecution = (\n    h: number,\n    w: number,\n    myturn: Color,\n    prevState: Color[][]\n  ): { newState: Color[][]; isReversed: boolean } => {\n    const newState = [...prevState];\n    let isReversed = false;\n\n    // [0]が自分のターン、[1]が相手のターンを指す\n    const [me, enemy]: [Color, Color] =\n      myturn === \"BL\" ? [\"BL\", \"WH\"] : [\"WH\", \"BL\"];\n\n    for (let i = 0; i < 3; i += 1) {\n      for (let j = 0; j < 3; j += 1) {\n        let nh = h;\n        let nw = w;\n        // eslint-disable-next-line no-continue\n        if (dh[i] === dw[j] && dh[i] === 0) continue;\n        // else {\n        let isReversible = false;\n        let pre = \"N\";\n        while (1) {\n          // 自分が黒の時は 白,白,白,黒 のときのみOK\n          nh += dh[i];\n          nw += dw[j];\n\n          if (nh >= 8 || nw >= 8 || nh < 0 || nw < 0) break;\n          else if (newState[nh][nw] === \"N\") break;\n          else if (newState[nh][nw] === enemy) pre = enemy;\n          else if (newState[nh][nw] === me && pre === enemy) {\n            isReversible = true;\n            break;\n          } else break;\n        }\n\n        if (isReversible) {\n          isReversed = true;\n          nh = h;\n          nw = w;\n          while (1) {\n            if (newState[nh][nw] === me) break;\n            newState[nh][nw] = me;\n            // 初期位置は戻してあげないとバグる\n            if (nh === h && nw === w) newState[nh][nw] = \"N\";\n            nh += dh[i];\n            nw += dw[j];\n          }\n        }\n      }\n    }\n    if (isReversed) newState[h][w] = me;\n\n    return { newState, isReversed };\n  };\n\n  const reverseCells = (h: number, w: number, prevState: Color[][]) => {\n    // インターフェースだけ\n    const newState = [...prevState];\n    switch (newState[h][w]) {\n      case \"N\":\n        return reverseExecution(h, w, turn, newState);\n      default:\n        return { newState, isReversed: false };\n    }\n  };\n\n  const putCell = (h: number, w: number): void => {\n    // ここで、h,wの色を変えたりする\n    // calcCells()的な\n    // 下も副作用がないように意識\n\n    setBoardState((prevState) => {\n      // ひっくり返す処理を実装\n      const { newState, isReversed } = reverseCells(h, w, [...prevState]);\n      if (isReversed) {\n        setTurn((prevTurn) => {\n          if (prevTurn === \"WH\") return \"BL\";\n          return \"WH\";\n        });\n      }\n      return newState;\n    });\n  };\n\n  return (\n    <>\n      <h3>今のターン{turn}</h3>\n      <table className=\"inner\">\n        <tbody>\n          {indexes.map((h) => (\n            <tr key={h}>\n              <BoardRow h={h} putCell={putCell} rowColor={boardState[h]} />\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport default Board;\n","import React from \"react\";\nimport \"./App.css\";\nimport Board from \"./components/OthelloParts\";\n\nconst App: React.FC = () => (\n  <div className=\"app outer\">\n    <Board />\n  </div>\n);\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}