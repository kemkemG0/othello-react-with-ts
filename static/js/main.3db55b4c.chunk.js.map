{"version":3,"sources":["components/interfaces.tsx","utils/reverseExecution.tsx","utils/reverseCells.tsx","utils/decideColor.tsx","components/Cell.tsx","components/BoardRow.tsx","components/Board.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["normalRow","dh","dw","indexes","Array","keys","reverseExecution","h","w","myturn","prevState","newState","isReversed","me","enemy","i","j","nh","nw","isReversible","pre","reverseCells","turn","decideColor","color","cellColor","Cell","props","putCell","type","className","style","background","onClick","BoardRow","rowColor","map","Board","useState","boardState","setBoardState","setTurn","prevTurn","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3db55b4c.chunk.js","sourcesContent":["export type Color = \"BL\" | \"WH\" | \"N\";\nexport interface BoardRowProps {\n  h: number;\n  rowColor: Color[];\n  putCell: (h: number, w: number) => void;\n}\nexport interface CellProps {\n  h: number;\n  w: number;\n  color: Color;\n  putCell: (h: number, w: number) => void;\n}\n\nexport const normalRow: Color[] = [\"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\"];\nexport const dh = [1, -1, 0];\nexport const dw = [1, -1, 0];\nexport const indexes = [...Array(8).keys()];\n","import { Color, dh, dw } from \"../components/interfaces\";\n\nconst reverseExecution = (\n  h: number,\n  w: number,\n  myturn: Color,\n  prevState: Color[][]\n): { newState: Color[][]; isReversed: boolean } => {\n  const newState = [...prevState];\n  let isReversed = false;\n\n  // [0]が自分のターン、[1]が相手のターンを指す\n  const [me, enemy]: [Color, Color] =\n    myturn === \"BL\" ? [\"BL\", \"WH\"] : [\"WH\", \"BL\"];\n\n  for (let i = 0; i < 3; i += 1) {\n    for (let j = 0; j < 3; j += 1) {\n      let nh = h;\n      let nw = w;\n      // eslint-disable-next-line no-continue\n      if (dh[i] === dw[j] && dh[i] === 0) continue;\n      // else {\n      let isReversible = false;\n      let pre = \"N\";\n      for (;;) {\n        // 自分が黒の時は 白,白,白,黒 のときのみOK\n        nh += dh[i];\n        nw += dw[j];\n\n        if (nh >= 8 || nw >= 8 || nh < 0 || nw < 0) break;\n        else if (newState[nh][nw] === \"N\") break;\n        else if (newState[nh][nw] === enemy) pre = enemy;\n        else if (newState[nh][nw] === me && pre === enemy) {\n          isReversible = true;\n          break;\n        } else break;\n      }\n\n      if (isReversible) {\n        isReversed = true;\n        nh = h;\n        nw = w;\n        for (;;) {\n          if (newState[nh][nw] === me) break;\n          newState[nh][nw] = me;\n          // 初期位置は戻してあげないとバグる\n          if (nh === h && nw === w) newState[nh][nw] = \"N\";\n          nh += dh[i];\n          nw += dw[j];\n        }\n      }\n    }\n  }\n  if (isReversed) newState[h][w] = me;\n\n  return { newState, isReversed };\n};\n\nexport default reverseExecution;\n","import { Color } from \"../components/interfaces\";\nimport reverseExecution from \"./reverseExecution\";\n\nconst reverseCells = (\n  h: number,\n  w: number,\n  prevState: Color[][],\n  turn: Color\n): {\n  newState: Color[][];\n  isReversed: boolean;\n} => {\n  // インターフェースだけ\n  const newState = [...prevState];\n  switch (newState[h][w]) {\n    case \"N\":\n      return reverseExecution(h, w, turn, newState);\n    default:\n      return { newState, isReversed: false };\n  }\n};\n\nexport default reverseCells;\n","import { Color } from \"../components/interfaces\";\n\nconst decideColor = (color: Color): string => {\n  let cellColor;\n  switch (color) {\n    case \"BL\":\n      cellColor = \"black\";\n      break;\n    case \"WH\":\n      cellColor = \"white\";\n      break;\n    default:\n      cellColor = \"green\";\n  }\n  return cellColor;\n};\n\nexport default decideColor;\n","import React from \"react\";\nimport { CellProps } from \"./interfaces\";\nimport decideColor from \"../utils/decideColor\";\n\nconst Cell: React.FC<CellProps> = (props) => {\n  const { h, w, color, putCell } = props;\n  const cellColor = decideColor(color);\n  return (\n    <>\n      <input\n        type=\"button\"\n        className=\"btn\"\n        style={{\n          background: cellColor,\n        }}\n        onClick={() => {\n          putCell(h, w);\n        }}\n      />\n    </>\n  );\n};\n\nexport default Cell;\n","import React from \"react\";\nimport Cell from \"./Cell\";\nimport { BoardRowProps } from \"./interfaces\";\n\nconst BoardRow: React.FC<BoardRowProps> = (props) => {\n  const indexes = [...Array(8).keys()];\n  const { h, rowColor, putCell } = props;\n  return (\n    <>\n      {indexes.map((w) => (\n        <td key={w}>\n          <Cell h={h} w={w} color={rowColor[w]} putCell={putCell} />\n        </td>\n      ))}\n    </>\n  );\n};\n\nexport default BoardRow;\n","import React, { useState } from \"react\";\nimport reverseCells from \"../utils/reverseCells\";\nimport BoardRow from \"./BoardRow\";\nimport { Color, normalRow, indexes } from \"./interfaces\";\n\nconst Board: React.FC = () => {\n  const [boardState, setBoardState] = useState<Color[][]>([\n    [...normalRow],\n    [...normalRow],\n    [...normalRow],\n    [\"N\", \"N\", \"N\", \"WH\", \"BL\", \"N\", \"N\", \"N\"],\n    [\"N\", \"N\", \"N\", \"BL\", \"WH\", \"N\", \"N\", \"N\"],\n    [...normalRow],\n    [...normalRow],\n    [...normalRow],\n  ]);\n\n  const [turn, setTurn] = useState<Color>(\"BL\");\n\n  const putCell = (h: number, w: number): void => {\n    // ここで、h,wの色を変えたりする\n    // calcCells()的な\n    // 下も副作用がないように意識\n\n    setBoardState((prevState) => {\n      // ひっくり返す処理を実装\n      const { newState, isReversed } = reverseCells(h, w, [...prevState], turn);\n      if (isReversed) {\n        setTurn((prevTurn) => {\n          if (prevTurn === \"WH\") return \"BL\";\n          return \"WH\";\n        });\n      }\n      return newState;\n    });\n  };\n\n  return (\n    <div>\n      <h2>今のターン{turn}</h2>\n      <table className=\"inner\">\n        <tbody>\n          {indexes.map((h) => (\n            <tr key={h}>\n              <BoardRow h={h} putCell={putCell} rowColor={boardState[h]} />\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default Board;\n","import React from \"react\";\nimport \"./App.css\";\nimport Board from \"./components/Board\";\n\nconst App: React.FC = () => (\n  <div className=\"app outer\">\n    <Board />\n  </div>\n);\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}